# Red Black Tree Insertion Implementation
Once you've copied over BinarySearchTree.java from the P10.Rotation into the P13.RBTInsert folder, create a new class RedBlackTree in the P13.RBTInsert folder that extends your BinarySearchTree class. The new class must be generic, accept a type parameter with the same restrictions as BinarySearchTree, and pass that type parameter on to the BinarySearchTree class it extends.
Next, we will define an extended node class that, stores the color for each node in addition to the node's parent, children and data. For this, add the following class definition as a nested class inside your RedBlackTree class. This class extends the Node<T> class so that we can use instances of it as nodes in our tree. In addition to adding a blackHeight field, it has convenience getter methods for the up and down references so that we don't have to manually cast to RBTNode<T> if we want to access the blackHeight field. Copy the class definition directly into your RedBlackTree class without making any changes to it. EDIT 09/03: The blackHeight field holds the color of the node: 0 for red nodes, and 1 for black nodes.
protected static class RBTNode<T> extends Node<T> {
    public int blackHeight = 0;
    public RBTNode(T data) { super(data); }
    public RBTNode<T> getUp() { return (RBTNode<T>)this.up; }
    public RBTNode<T> getDownLeft() { return (RBTNode<T>)this.down[0]; }
    public RBTNode<T> getDownRight() { return (RBTNode<T>)this.down[1]; }
}
Add a new protected method to your RedBlackTree class called enforceRBTreePropertiesAfterInsert which takes a reference to a newly added red node as its only parameter. Note that this method may also be called recursively, in which case the input parameter may reference a different red node in the tree that potentially has a red parent node. The job of this enforceRBTreePropertiesAfterInsert method is to resolve any red property violations that are introduced by inserting a new node into the red-black tree.
Override the insert method of BinarySearchTree by defining a method with the same signature in the RedBlackTree class. In that new method, instantiate a new RBTNode<T> with the key passed in and insert it into the tree by calling insertHelper of BinarySearchTree. After the node is successfully inserted, call enforceRBTreePropertiesAfterInsert for this new node. After the call to enforceRBTreePropertiesAfterInsert, add a statement that sets the root node of the tree to black.
Add at least 3 JUnit test methods within your RedBlackTree class. Each test should be designed to test a different case for inserting into a red black tree, and check that your enforceRBTreePropertiesAfterInsert method is correctly following the algorithms discussed in lecture. Those tests will fail at first, but should pass once you have implemented enforceRBTreePropertiesAfterInsert. Be sure to include JavaDoc style method header comments for each of these test methods that clearly describe what high-level "case" each method is testing. Also include in-line comments to document the steps of your test code. Submit the RedBlackTree class with the three test methods by Monday, Oct 2. If you need to change your tests after the mid-week submission, you are welcome to do so.
Implement the remaining enforceRBTreePropertiesAfterInsert method to recognize and handle each of the possible red-black tree property violation cases described in your lecture and readings. You should make use of the rotate method that you implemented last week, by calling it from your definition of enforceRBTreePropertiesAfterInsert. Implementing this method correctly should ensure that the worst-case height of your tree remains O(log n), where n = the size or number of elements stored in your red black tree.
Avoid adding any extra fields or methods to the RedBlackTree class, other than those explicitly described above. If you'd like to add helper methods to help with testing or to structure your code, you can do so. Please make sure that the only places from which you call those methods is from either your tests or your enforceRBTreePropertiesAfterInsert. Also notice that you are not being asked to implement the remove operation for this red black tree implementation.
